<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TaskMaster - Login and Registration</title>
  <link rel="stylesheet" href="styles/register_styles.css">

</head>
<body>
  <nav class="register-nav">
    <a href="index.html"><div class="logo">TASKMASTER</div> </a>
    <ul class="nav_buttons">
      <li class="home"><a href="index.html"><i class="fa-solid fa-house fa-xs" aria-hidden="true" ></i>  HOME</a></li>
      <li class="plan"><a href="#" onclick="redirectToTaskPage()"> <i class="fa-solid fa-calendar fa-xs"></i>  PLAN</a></li>
    </ul>
  </nav>

  <div class="form">
    <ul class="tab-group">
      <li class="tab active"><a href="#login">Log In</a></li>
      <li class="tab"><a href="#signup">Sign Up</a></li>
    </ul>

    <div class="tab-content">
      <div id="login">
        <p>Welcome Back!</p>
        <form id="login_form"action="/api/login" method="POST">
          <div class="field-wrap">
            <input type="text" id="login_username" placeholder="Username" required>
          </div>
          <div class="field-wrap">
            <input type="password" id="login_password" placeholder="Password" required>
          </div>
          <button type="submit" class="button-block">Log In</button>
        </form>
      </div>

      <div id="signup">
        <p>Register</p>
        <form id="signup_form" action="/api/users" method="POST">
          <div class="field-wrap">
            <input type="text" id="signup_username" placeholder="Username" required>
          </div>
          <div class="field-wrap">
            <input type="password" id="signup_password" placeholder="Password" required>
          </div>
          <button type="submit" class="button-block">Sign Up</button>
        </form>
      </div>      
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://kit.fontawesome.com/e0c28b56a4.js" crossorigin="anonymous"></script>
  <script src="javascript/user.js"></script>
  <script>
    function redirectToTaskPage() {
      const isLoggedIn = localStorage.getItem('loggedIn');

      if (isLoggedIn === 'true') {
        window.location.href = 'plan.html';
      } else {
        alert('Please register and log in to access the task page.');
      }
    }
  </script>
</body>
</html>
